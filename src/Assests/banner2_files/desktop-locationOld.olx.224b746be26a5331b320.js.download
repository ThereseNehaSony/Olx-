(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8490],{23940:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c}),s(73210),s(24603),s(74916),s(39714),s(85827),s(23123);var n=s(58056),o=s.n(n),a=s(56107);const i=e=>{let{text:t,term:s,caseSensitive:n}=e;if(!s)return o().createElement("span",null,t);const i=(0,a.Rj)(s.trim()),c=new RegExp(i,n?"":"i"),l=c.exec(t)?c.exec(t)[0]:s;return o().createElement("span",null,t.split(c).reduce(((e,t,n)=>n?e.concat(o().createElement("b",{key:s+t},l),t):[t]),[]))};i.defaultProps={term:null,caseSensitive:!1};const c=i},73507:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h}),s(41817);var n=s(58056),o=s.n(n),a=s(7365),i=s(94910),c=s(94184),l=s.n(c);var r=s(39776);const h=(0,i.injectIntl)((e=>{let{intl:t,onClose:s}=e;return o().createElement("div",{"data-aut-id":"gps-blocked-modal"},o().createElement(a.Overlay,{isOpened:!0,overlayClassName:l()("_1NcPn"),contentClassName:l()("_13biE"),onClose:s},o().createElement("div",{className:l()("_1D1x-")},o().createElement(r.Z,{dataAutId:"btnClose",onClick:s,icon:"cross",size:24,color:"blackIcons"})),o().createElement("div",{className:l()("scyLP")},o().createElement("div",{className:l()("-wXi5")},o().createElement("span",null,t.formatMessage({id:"geolocation_blocked"}))),o().createElement("div",{className:l()("Ecdc_")},o().createElement("span",null,t.formatMessage({id:"geolocation_blocked_description"}))))))}))},29798:(e,t,s)=>{"use strict";s.r(t),s.d(t,{LocationAutocomplete:()=>H,WAIT_INTERVAL:()=>z,default:()=>X});var n=s(59713),o=s.n(n),a=(s(19601),s(73210),s(58056)),i=s.n(a),c=s(94184),l=s.n(c),r=s(8092),h=s(7365),p=s(79062);const u={locationAutocomplete:"_1JkUe",containerInput:"bGCL7",thinBorder:"_1av67",inputLocation:"_1dasd",arrowIcon:"_3UNpw",arrowIconUp:"dXoOG",defaultOptions:"_3HtQu",suggestionsOptions:"_34q3t",hide:"Eecy3",fullPageLoader:"EvJB4",iconLoader:"_3eXhX",tryAgain:"_1RZyX"};var d=s(78718),m=s.n(d),g=s(48711),L=s(38473),C=s(23326),E=s(78772),f=s(39903),v=s(94910),S=s(22229),_=s(17319),N=s(87602),O=s(14884),k=s(21310),T=s(20309),y=s(10644);const w=e=>{let{popularLocations:t=[],maxLocations:s,onChange:n}=e;const o=t&&t.slice(0,s);return o.length?i().createElement("div",{className:k.Z.sectionLocations},i().createElement("div",{className:k.Z.sectionLocationsTitle},i().createElement(v.FormattedMessage,{id:"popularLocations"})),i().createElement("div",null,o.map(((e,t)=>i().createElement(T.Z,{key:t,name:e.name,onSelect:()=>n(e,{location_type:y.cJ})}))))):null},Z=e=>{let{selectedLocation:t={},recentLocations:s,onChange:n}=e;const o=s&&!!s.length&&s.filter((e=>e.id!==t.id));return o.length?i().createElement("div",{className:k.Z.sectionLocations},i().createElement("div",{className:k.Z.sectionLocationsTitle},i().createElement(v.FormattedMessage,{id:"recentLocations"})),i().createElement("div",null,o.map(((e,t)=>i().createElement(T.Z,{key:t,name:e.name,onSelect:()=>n(e,{location_type:y.Wj})}))))):null};var I=s(53488);const P=e=>{let{suggestions:t,onChange:s,searchTerm:n,suggestionsListClass:o,customSuggestionListClass:a,locationOptionClass:c}=e;return i().createElement("div",{className:l()(o,"_38GxX",a)},i().createElement("div",{className:"_32lww"},t&&t.map((e=>i().createElement(T.Z,{key:e.id,name:(0,I.z7)(e.addressComponents)||e.name,highlight:n,classes:{locationOption:c},onSelect:()=>s(e,{location_type:y.tF})})))))};var M=s(6772);s(33948);const{icons:A}=h.css;class F extends i().Component{constructor(){super(...arguments),o()(this,"componentDidMount",(()=>document.addEventListener("mousedown",this.handleClickOutside))),o()(this,"componentWillUnmount",(()=>document.removeEventListener("mousedown",this.handleClickOutside))),o()(this,"handleClickOutside",(e=>{this.containerRef&&!this.containerRef.contains(e.target)&&this.props.onClose()}))}render(){const{elementNode:e,onClose:t,message:s}=this.props,n=e&&{width:e.offsetWidth,top:e.offsetHeight+e.offsetTop+5,left:e.offsetLeft};return e?i().createElement("div",{className:"_2oaBz",style:n,ref:e=>this.containerRef=e},i().createElement("div",{className:"_2zPPB"},i().createElement("span",{className:l()(A.panameraIcons,A["icon-Cross"],"_2jQDP"),onClick:t}),s)):null}}o()(F,"defaultProps",{onClose:()=>{}});const x=F;var b=s(39211),D=s(73507),G=s(35261),B=s(71160),U=s(23593),j=s(1824),R=s(16556);const z=300;class H extends i().PureComponent{constructor(e){super(e),o()(this,"componentDidUpdate",(e=>{const{selectedLocation:t,isSelectedLocationGPSSelector:s,selectedLocationName:n}=this.props;t.id===e.selectedLocation.id&&s===e.isSelectedLocationGPSSelector||this.setState({input:n})})),o()(this,"focusInputContainer",(()=>{this.inputContainer&&(this.inputContainer.select(),this.inputContainer.click())})),o()(this,"handleCloseTooltip",(()=>this.setState({showError:!1}))),o()(this,"handleLoading",(e=>{this.setState({isLoading:e}),this.props.onLoading(e)})),o()(this,"handleOnchange",((e,t)=>{e?(this.setState({isTyping:!1},(()=>this.props.onChange(e,t))),(0,E.oe)(e)):this.handleGpsMessage(t)})),o()(this,"handleOnFocus",(()=>{this.props.onFocus("location"),this.focusInputContainer(),this.props.track(this.props.trackName||y.SU,Object.assign({origin:this.props.trackOrigin,select_from:this.props.trackSelectFrom,place_selected_id:this.props.selectedLocation.id},this.props.tracking))})),o()(this,"handleOnFocusIcon",(()=>this.focusInputContainer())),o()(this,"handleChangeValue",(e=>{clearTimeout(this.timer);const t=e.currentTarget.value;t.trim().length>0?this.setState({input:t,isTyping:!0},(()=>{t.length>2&&(this.timer=setTimeout(this.handleGetSuggestions,z))})):this.setState({input:"",isTyping:!1})})),o()(this,"handleGetSuggestions",(()=>this.props.getSuggestions(m()(this.state,"input","limit","types")))),o()(this,"handleClearInput",(()=>{this.setState({input:"",isTyping:!1}),this.focusInputContainer()})),o()(this,"handleTryAgain",(()=>{this.handleCloseTooltip(),this.focusInputContainer()})),o()(this,"handleGpsMessage",(e=>{(0,b.AM)().then((()=>this.handleCloseGpsMessage())).catch((()=>{B.t?this.props.onChange(this.props.selectedLocation,e):this.setState({showGpsBlockedMessage:!0})}))})),o()(this,"handleCloseGpsMessage",(()=>this.setState({showGpsBlockedMessage:!1},this.handleOnFocusIcon))),this.state={isTyping:!1,limit:5,types:e.config.get(R.k.DEFAULT_CITY,R.k.ENABLE_COUNTRY_IN_AUTOCOMPLETE)?"":"city,state,neighbourhood",input:e.showBlankSearch||!e.getDefaultLocation&&B.t?"":e.selectedLocationName,loggedUser:S.Z.getUser(),isLoading:!1,showError:!1,showGpsBlockedMessage:!1},this.translations={currentLocation:{id:"use_current_location"},searchLocationHint:{id:"searchLocationHint"},locationErrorTooltip:{id:"locationErrorTooltip"},locationErrorTooltipTry:{id:"locationErrorTooltipTry"}},this.inputContainer=null,this.isMXCL=e.config.get("olxAutos","isMXCL"),this.theme=e.config.get("theme","id")}componentDidMount(){this.inputContainer&&this.props.defaultFocus&&this.focusInputContainer(),this.timer=null,this.props.updateGPSStatus()}render(){const e=this.props.suggestions(m()(this.state,"input","limit","types"))||[],{visible:t,popularLocations:s,config:n,selectedLocation:o,suggestionsClass:a,intl:c,withArrow:r}=this.props,{isTyping:d,input:g,showError:L,isLoading:E,showGpsBlockedMessage:f}=this.state,v=(0,C.U2)(),S=i().createElement(i().Fragment,null,i().createElement("span",null,c.formatMessage(this.translations.locationErrorTooltip)," "),i().createElement("span",{className:u.tryAgain,onClick:this.handleTryAgain},c.formatMessage(this.translations.locationErrorTooltipTry))),_=r?i().createElement("span",{className:l()(u.arrowIcon,{[u.arrowIconUp]:t})},i().createElement(p.Z,{icon:"arrowDown",animation:!1,onClick:t?this.props.onLostFocus:this.handleOnFocus,theme:this.theme})):null;return i().createElement("div",{className:l()(u.locationAutocomplete,this.props.headClassName)},i().createElement("div",{"data-aut-id":"locationBox",className:l()(u.containerInput,{[u.thinBorder]:this.isMXCL||this.theme===j.yU.LETGO},this.props.containerClassName),ref:e=>this.containerTooltip=e},E?i().createElement(h.Loader,{className:u.iconLoader,containerSize:"32px"}):i().createElement(U.Z,{icon:this.props.locIcon||"search",size:25}),i().createElement("input",{className:u.inputLocation,value:g,placeholder:c.formatMessage(this.translations.searchLocationHint),onChange:this.handleChangeValue,onFocus:this.handleOnFocus,ref:e=>{this.inputContainer=e}}),d?i().createElement("span",{className:u.clearIcon},i().createElement(p.Z,{icon:"cross",color:"blackText",animation:!1,onClick:this.handleClearInput})):_,L&&i().createElement(x,{message:S,elementNode:this.containerTooltip,onClose:this.handleCloseTooltip})),t&&(e&&!!e.length||!d)&&i().createElement("div",{className:l()(u.wrapperOptions,a)},e&&!!e.length&&i().createElement(P,{suggestions:e,onChange:this.handleOnchange,searchTerm:g,suggestionsListClass:u.suggestionsOptions,customSuggestionListClass:this.props.customSuggestionListClass,locationOptionClass:this.props.locationOptionClass}),!d&&i().createElement("div",{className:l()(u.defaultOptions,this.props.defaultOptionsClass)},i().createElement(M.ZP,{onChange:this.handleOnchange,onLoading:this.handleLoading,classes:{currentLocation:this.props.currentLocationClass,locationOption:this.props.locationOptionClass}}),i().createElement(Z,{selectedLocation:o,recentLocations:v,onChange:this.handleOnchange}),i().createElement(w,{popularLocations:s,maxLocations:n.get("searchHeader","maxPopularLocations"),onChange:this.handleOnchange}))),E&&this.props.showLoading&&i().createElement(h.FullPageLoader,{className:u.fullPageLoader,text:c.formatMessage({id:"loadingAdsToRelocate"})}),f&&i().createElement(D.Z,{onClose:this.handleCloseGpsMessage}))}}o()(H,"defaultProps",{config:{},getSuggestions:G.Z,suggestions:G.Z,selectedLocation:{},trackOrigin:"",onChange:G.Z,onFocus:G.Z,onLostFocus:G.Z,suggestionsClass:"",defaultFocus:!1,showLoading:!0,visible:!1,onLoading:G.Z,onClickOutside:G.Z,withArrow:!1,updateGPSStatus:G.Z,headClassName:"",defaultOptionsClass:"",customSuggestionListClass:"",locationOptionClass:"",currentLocationClass:"",getDefaultLocation:!1,showBlankSearch:!1});const X=(0,r.compose)(_.Z,N.Z,O.Z,v.injectIntl,(0,g.connect)(((e,t)=>({suggestions:t=>(0,L.suggestionsSelector)(e,t),trackOrigin:e.track.origin,selectedLocation:(0,L.selectedLocationSelector)(e),isSelectedLocationGPSSelector:(0,L.isSelectedLocationGPSSelector)(e),selectedLocationName:(0,L.selectedLocationNameSelector)(e,t)})),(e=>({getSuggestions:t=>e((0,f.vt)(t)),updateGPSStatus:()=>e((0,f.JU)())}))))(H)},20309:(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var n=s(58056),o=s.n(n),a=s(94910),i=s(39776),c=s(94184),l=s.n(c);var r=s(23940);const h=e=>{let{name:t,onSelect:s,highlight:n,iconClass:c,icon:h,showLabel:p,showFullText:u,id:d,classes:m}=e;return o().createElement("div",{"data-aut-id":"locationItem",className:l()("_3_Rdm",null==m?void 0:m.locationOption,null==m?void 0:m.radioBtn,null==m?void 0:m.active),onClick:s},o().createElement(i.Z,{className:l()("COluN",c),direction:"ltr",icon:h,name:"IconButton",id:d}),o().createElement("div",{className:l()("_1lcFr",null==m?void 0:m.text)},p&&o().createElement("div",{className:l()("_2cPJ0",null==m?void 0:m.currentLocationLabel)},o().createElement(a.FormattedMessage,{id:"useCurrentLocationLabel"})),n?o().createElement(r.Z,{text:t,term:n}):o().createElement("span",{className:l()({_3s6Nn:u},null==m?void 0:m.locationText)},t)))};h.defaultProps={icon:"location",iconClass:"",showLabel:!1,showFullText:!1,id:"",name:"",onSelect:()=>{}};const p=h},6772:(e,t,s)=>{"use strict";s.d(t,{ZP:()=>C}),s(33948);var n=s(58056),o=s.n(n),a=s(94184),i=s.n(a),c=s(35161),l=s.n(c),r=s(8092),h=s(48711),p=s(94910),u=s(21310),d=s(20309),m=s(39211),g=s(10644),L=s(38473);const C=(0,r.compose)((0,h.connect)((e=>({gpsData:(0,L.gpsSelector)(e)})),(e=>({getNearByAds:t=>e((0,m.iI)(t))}))),p.injectIntl)((e=>{let{onChange:t,onLoading:s,getNearByAds:a,intl:c,gpsData:r,classes:h}=e;const p=function(e,t){let{location:s={},status:n=null,isFetching:o}=e;const a=s&&Object.keys(s).length;return o&&!a?t.formatMessage({id:"fetchingLocationLabel"}):null===n||"prompt"===n?t.formatMessage({id:"enableLocationLabel"}):"rejected"===n?t.formatMessage({id:"gpsBlockedLabel"}):a?Array.from(new Set(l()(s,"name"))).join(", "):t.formatMessage({id:"current_gps_location_label"})}(r,c),m=(0,n.useCallback)((()=>a(s).then((e=>t(e,{location_type:g.H1}))).catch((()=>t()))),[a,s,t]);return o().createElement("div",{className:i()(u.Z.sectionLocations,u.Z.currentLocation,null==h?void 0:h.currentLocation)},o().createElement(d.Z,{name:p,icon:"crosshairs",onSelect:m,id:u.Z.currentLocationIcon,showLabel:!0,showFullText:"rejected"===r.status,classes:h,iconClass:null==h?void 0:h.locationIcon}))}))},14884:(e,t,s)=>{"use strict";s.d(t,{Z:()=>C});var n=s(67154),o=s.n(n),a=s(59713),i=s.n(a),c=(s(33948),s(88674),s(58056)),l=s.n(c),r=s(48711),h=s(8092),p=s(53074),u=s.n(p),d=s(39903),m=s(60937),g=s(38473),L=s(87602);const C=e=>{class t extends l().Component{constructor(){super(...arguments),i()(this,"componentDidMount",(()=>this.props.getPopularLocations(this.props.marketConfig))),i()(this,"componentDidUpdate",(()=>this.props.getPopularLocations(this.props.marketConfig)))}render(){const{isFetchingPopular:t,popular:s}=this.props;return l().createElement(e,o()({},this.props,{isFetchingPopularLocations:t,popularLocations:s}))}}t.fetchData=function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];const[o,a]=s,{config:i}=a,c=[e.fetchData?e.fetchData(...s):Promise.resolve()];return Promise.all(c).then((()=>o((0,d.zs)(i))))};const s=e.displayName||e.name||"Component";t.displayName="withPopularLocations("+s+")";const n=(0,h.compose)((0,L.R)("marketConfig"),(0,r.connect)(((e,t)=>{let{marketConfig:s}=t;const n=s&&s.get("isCountryWithoutState");return{popular:(0,m.xm)(e,n),isFetchingPopular:(0,m.zF)(e,n),countryLocation:(0,g.countryLocationSelector)(e)}}),((e,t)=>{let{marketConfig:s}=t;return{getPopularLocations:()=>e((0,d.zs)(s))}})))(t);return u()(n,e,{fetchData:!0})}},25970:(e,t,s)=>{var n=s(63012),o=s(79095);e.exports=function(e,t){return n(e,t,(function(t,s){return o(e,s)}))}},99021:(e,t,s)=>{var n=s(85564),o=s(45357),a=s(30061);e.exports=function(e){return a(o(e,void 0,n),e+"")}},78718:(e,t,s)=>{var n=s(25970),o=s(99021)((function(e,t){return null==e?{}:n(e,t)}));e.exports=o},21310:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={sectionLocations:"_1tKj4",sectionLocationsTitle:"_15am-",currentLocationIcon:"_3Aljz",currentLocation:"f6e0w"}}}]);
//# sourceMappingURL=desktop-locationOld.olx.224b746be26a5331b320.js.map